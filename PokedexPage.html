<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>
        var iosocket = io.connect('http://localhost:3000');
        var availableTags;
        function getSite(theData){
            console.log(theData)
        }
        function dispPoke(){
            iosocket.emit('doDatabaseStuff');
        }

        function getPokeInfo(){
            console.log('in pokeinfo' + " " + $('#pokemonSelector').val());
            $('#theContents').text($('#pokemonSelector').val())
            iosocket.emit('getPicture', $('#pokemonSelector').val())
        }

        iosocket.on('updateDropDown', function(pokemon){
            availableTags = pokemon;
            console.log(pokemon);
            $( "#pokemonSelector" ).autocomplete({
                source: availableTags
            });
            getPokeInfo();
        });

        iosocket.on('setPicture', function(imgUrl, dexDat){
            console.log('in setpic')
            $('#curPokemon').html('<img src="' + imgUrl + '">')
            $('#curDescription').html('<h3>' + dexDat + '</h3>')
        });

    </script>
</head>
<body class="container">

<div class="row-fluid">
    <div id="navAndHeader"></div>
    <script type="text/javascript">
        $(function() {
            $("#navAndHeader").load("/template"); // add "/"
        });
    </script>
    <!--<input type="button" class='btn btn-default btn-success' onclick="dispPoke()" value="do stuff">-->
    <div id="theContents"></div>
    <div class="ui-widget">
    <input id='pokemonSelector' onChange="getPokeInfo()"/>
        </div>
    <div id="curPokemon" class="col-md-6 col-md-offset-3"></div><br>
    <div id="curDescription" class="col-md-12"></div>
</div>
</body>
</html>